Короткая памятка всему
------------------------

`make setup` поставит виртуальное окружение с нужными пакетами и создаст необходимые для работы папки,
а именно `tmp/` -- для сохранения файлов, `db/` -- для монги и `pybox/` -- с venv питона.

Настройки тестовой монги описаны в `smtac.conf`, список пакетов в `requirements.txt`


Для работы сделать


1. `make setup`
1. `make run`
1. `pybox/bin/python run.py` -- это можно было бы и в make запихнуть, но пусть так.

В `run.py` описан пример работы и короткое тестирование основных компонент.
`crawler.py` содержит основные и вспомогательные функции.

В каждую функцию передается словарь с пачкой дополнительных параметров для доступа к монге, дб и коллекции, там везде `**kwargs`. Это задел на MP выполнение, поскольку вся работа с капчами оказывается времязатратной.

Поскольку обрабатываемые странички содержат формы с большим количеством вариантов заполнения, я оставил возможность дописывать сценарии запуска.
Наиболее простой путь такого дописывания -- посмотреть на названия полей в форме, добавить в фильтрацию входных параметров это название
`result = {k : v for (k, v) in kwargs.iteritems() if k in ['ogrninnul']}`

а затем приписать логику заполнения формы

    if result.has_key('ogrn'):
        br['ogrn'] = result['ogrn']



Работа с `http://www.vestnik-gosreg.ru/publ/vgr/` не организованна из-за гугл-капчи.

